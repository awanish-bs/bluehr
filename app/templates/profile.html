<!-- Profile content included in employee dashboard -->
    <form method="post" action="{{ url_for('profile') }}" id="profile-form">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h2 class="mb-0">Profile</h2>
            <div>
                <button type="button" class="btn btn-primary" id="edit-profile-btn">
                    <i class="fas fa-edit"></i> Edit
                </button>
                <button type="submit" class="btn btn-success ml-2" id="save-profile-btn" style="display: none;">Save</button>
            </div>
        </div>
        <div id="profile-fieldset">
        <div class="form-row">
            <div class="form-group col-md-4">
                <label for="employee_id">Employee ID</label>
                <input type="text" class="form-control editable-field" id="employee_id" name="employee_id" value="{{ user.employee_id }}" readonly>
            </div>
            <div class="form-group col-md-4">
                <label for="first_name">First Name</label>
                <input type="text" class="form-control editable-field" id="first_name" name="first_name" value="{{ user.first_name }}" required readonly>
            </div>
            <div class="form-group col-md-4">
                <label for="last_name">Last Name</label>
                <input type="text" class="form-control editable-field" id="last_name" name="last_name" value="{{ user.last_name }}" required readonly>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="email">Email</label>
                <input type="email" class="form-control editable-field" id="email" name="email" value="{{ user.email }}" required readonly>
            </div>
            <div class="form-group col-md-6">
                <label for="phone_number">Phone Number</label>
                <input type="text" class="form-control editable-field" id="phone_number" name="phone_number" value="{{ user.phone_number or '' }}" pattern="\d{10,}" title="Enter a valid phone number (at least 10 digits)" readonly>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="date_of_birth">Date of Birth</label>
                <input type="date" class="form-control editable-field" id="date_of_birth" name="date_of_birth" value="{{ user.profile.date_of_birth.strftime('%Y-%m-%d') if user.profile and user.profile.date_of_birth }}" readonly>
            </div>
            <div class="form-group col-md-6">
                <label for="address">Address</label>
                <input type="text" class="form-control editable-field" id="address" name="address" value="{{ user.profile.address or '' }}" readonly>
            </div>
        </div>
        <hr>
        <h5>Identity Proof</h5>
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="aadhar_number">Aadhar Number</label>
                <input type="text" class="form-control editable-field" id="aadhar_number" name="aadhar_number" value="{{ user.profile.aadhar_number or '' }}" pattern="[0-9]{12}" title="Aadhar must be a 12 digit number" readonly>
            </div>
            <div class="form-group col-md-6">
                <label for="pan_number">PAN Number</label>
                <input type="text" class="form-control editable-field" id="pan_number" name="pan_number" value="{{ user.profile.pan_number or '' }}" pattern="[A-Za-z0-9]{10}" title="PAN must be alphanumeric and 10 characters long" readonly>
            </div>
        </div>
        <hr>
        <h5>Bank Details</h5>
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="bank_name">Bank Name</label>
                <input type="text" class="form-control editable-field" id="bank_name" name="bank_name" value="{{ user.profile.bank_name or '' }}" readonly>
            </div>
            <div class="form-group col-md-6">
                <label for="bank_account_number">Bank Account Number</label>
                <input type="text" class="form-control editable-field" id="bank_account_number" name="bank_account_number" value="{{ user.profile.bank_account_number or '' }}" pattern="[0-9]+" title="Bank account number must be numeric" readonly>
            </div>
        </div>
        <div class="form-group">
            <label for="ifsc_code">IFSC Code</label>
            <input type="text" class="form-control editable-field" id="ifsc_code" name="ifsc_code" value="{{ user.profile.ifsc_code or '' }}" readonly>
        </div>
    </div>
</form>

<script>
    document.getElementById('edit-profile-btn').addEventListener('click', function() {
        // Remove readonly from all editable fields
        var fields = document.querySelectorAll('.editable-field');
        fields.forEach(function(field) {
            field.removeAttribute('readonly');
        });
        this.style.display = 'none';
        document.getElementById('save-profile-btn').style.display = 'inline-block';
    });

    // No submit handler needed - form will submit normally and page will reload
    // with all fields readonly by default from the template
</script>