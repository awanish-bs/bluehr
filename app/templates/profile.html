{% extends "base.html" %}

{% block content %}
  <h2>Profile</h2>
  <form method="post" action="{{ url_for('profile') }}">
    <fieldset id="profile-fieldset" disabled>
        <div class="form-row">
            <div class="form-group col-md-4">
                <label for="employee_id">Employee ID</label>
                <input type="text" class="form-control" id="employee_id" name="employee_id" value="{{ user.employee_id }}" readonly>
            </div>
            <div class="form-group col-md-4">
                <label for="first_name">First Name</label>
                <input type="text" class="form-control" id="first_name" name="first_name" value="{{ user.first_name }}" required readonly>
            </div>
            <div class="form-group col-md-4">
                <label for="last_name">Last Name</label>
                <input type="text" class="form-control" id="last_name" name="last_name" value="{{ user.last_name }}" required readonly>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="email">Email</label>
                <input type="email" class="form-control" id="email" name="email" value="{{ user.email }}" required readonly>
            </div>
            <div class="form-group col-md-6">
                <label for="phone_number">Phone Number</label>
                <input type="text" class="form-control" id="phone_number" name="phone_number" value="{{ user.phone_number or '' }}">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="date_of_birth">Date of Birth</label>
                <input type="date" class="form-control" id="date_of_birth" name="date_of_birth" value="{{ user.profile.date_of_birth.strftime('%Y-%m-%d') if user.profile and user.profile.date_of_birth }}">
            </div>
            <div class="form-group col-md-6">
                <label for="address">Address</label>
                <input type="text" class="form-control" id="address" name="address" value="{{ user.profile.address or '' }}">
            </div>
        </div>
        <hr>
        <h5>Identity Proof</h5>
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="aadhar_number">Aadhar Number</label>
                <input type="text" class="form-control" id="aadhar_number" name="aadhar_number" value="{{ user.profile.aadhar_number or '' }}">
            </div>
            <div class="form-group col-md-6">
                <label for="pan_number">PAN Number</label>
                <input type="text" class="form-control" id="pan_number" name="pan_number" value="{{ user.profile.pan_number or '' }}">
            </div>
        </div>
        <hr>
        <h5>Bank Details</h5>
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="bank_name">Bank Name</label>
                <input type="text" class="form-control" id="bank_name" name="bank_name" value="{{ user.profile.bank_name or '' }}">
            </div>
            <div class="form-group col-md-6">
                <label for="bank_account_number">Bank Account Number</label>
                <input type="text" class="form-control" id="bank_account_number" name="bank_account_number" value="{{ user.profile.bank_account_number or '' }}">
            </div>
        </div>
        <div class="form-group">
            <label for="ifsc_code">IFSC Code</label>
            <input type="text" class="form-control" id="ifsc_code" name="ifsc_code" value="{{ user.profile.ifsc_code or '' }}">
        </div>
    </fieldset>
    <button type="button" class="btn btn-secondary" id="edit-profile-btn">Edit</button>
    <button type="submit" class="btn btn-primary" id="save-profile-btn" style="display: none;">Save</button>
</form>

<script>
    document.getElementById('edit-profile-btn').addEventListener('click', function() {
        document.getElementById('profile-fieldset').disabled = false;
        this.style.display = 'none';
        document.getElementById('save-profile-btn').style.display = 'inline-block';
    });
</script>

{% endblock %}